#!/bin/bash
# This file is not generated by autoconf
# Please do not try to modify this file

# Checking Current Shell
CONF_SHELL_BASH(){
	echo -n 'Checking current Shell ... '
	SH=$(echo $SHELL|sed -rne 's@.*/@@p')
	echo $SH
	if [ "x$SH" = "xbash" ];then
		return 0
	else
		echo "Please use bash to configure"
		echo "Please run following command and relogin:"
		echo "chsh -s /bin/bash $USER"
		exit 1
	fi
}

CONF_SH_BASH(){
	echo -n 'Checking sh Shell ... '
	SH=$(readlink -f /bin/sh|sed -rne 's@.*/@@p')
	echo $SH
	if [ "x$SH" = "xbash" ];then
		return 0
	else
		echo "Please use bash as sh"
		echo "Please run following command with root and select No:"
		echo "dpkg-reconfigure $SH"
		exit 1
	fi
}

CONF_YACC(){
	echo -n 'Checking yacc ... '
	YACC="/usr/bin/yacc"
	if [ -h $YACC ];then
		echo $YACC
		return 0
	else
		echo ""
		echo "Please run following command with root:"
		echo "apt install bison -y"
		exit 1
	fi
}

CONF_YACC_BISON(){
	echo -n 'Checking yacc is something bison ... '
	YACC="/usr/bin/yacc"
	BISON_YACC=$(readlink -f $YACC|sed -rne 's@.*/@@p')
	echo $BISON_YACC|grep bison > /dev/null
	BISON=$?
	if [ $BISON -eq 0 ];then
		echo yes
		return 0
	else
		cat $YACC |grep bison > /dev/null
		BISON=$?
		if [ $BISON -eq 0 ];then
			echo yes
			return 0
		else
			echo no
			echo "Please run following command with root:"
			echo "apt install bison -y"
			exit 1
		fi
	fi
}

CONF_AWK(){
	echo -n 'Checking awk ... '
	AWK="/usr/bin/awk"
	if [ -h $AWK ];then
		echo $AWK
		return 0
	else
		echo ""
		echo "Please run following command with root:"
		echo "apt install gawk -y"
		exit 1
	fi
}

CONF_AWK_GAWK(){
	echo -n 'Checking awk is something gawk ... '
	AWK="/usr/bin/awk"
	GAWK_AWK=$(readlink -f $AWK|sed -rne 's@.*/@@p')
	echo $GAWK_AWK|grep gawk > /dev/null
	GAWK=$?
	if [ $GAWK -eq 0 ];then
		echo yes
		return 0
	else
		cat $AWK |grep bison > /dev/null
		GAWK=$?
		if [ $GAWK -eq 0 ];then
			echo yes
			return 0
		else
			echo no
			echo "Please run following command with root:"
			echo "apt install gawk -y"
			exit 1
		fi
	fi
}

CONF_LOG(){
	echo -n "Creating config.detail ... "
	./version-check.sh > config.detail
	./library-check.sh >> config.detail
	echo done
}

CONF_LIBGCC(){
	return 0
}

CONF_SHELL_BASH
CONF_SH_BASH
CONF_YACC
CONF_YACC_BISON
CONF_AWK
CONF_AWK_GAWK
CONF_LIBGCC
CONF_LOG


